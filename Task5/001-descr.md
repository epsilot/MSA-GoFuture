# Разработка мультитенантной платформы

- Изолированность данных будет достигаться путём независимых развёртываний для каждого партнёра.
- Партнёр инициализирует подключение через специальный партнёрский портал.
- В случае успешной инициализации для партнёра создаётся группа в IAM, выдаются права доступа и запускается
  развёртывание.
- В случае успешного завершения, на специально прокси шлюзе, едином для всех партнёров открывается доступ для
  партнёрского трафика.
- Для выполнения мониторинга используется выделенный Prometheus, который собирает метрики из партнёрских развёртываний.
  При этом важно, чтобы все собираемые метрики были атрибутированы tenant_id для корректного сбора метрик, отображения
  дашбордов и генерации алармов.

## Таблица ролей

| Роль                   | Доступ к Данным                                                                                                                                                                                                                                                                 |
|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Владелец               | Полный доступ на чтение и изменения данных. Может добавлять/удалять пользователей. Может менять роли. Плюс возможность выполнять критические и необратимые операции (например удаление аккаунта)                                                                                |
| Администратор Партнёра | Полный доступ к данным своего tenant_id. Может добавлять/удалять новых пользователей. Может менять роли. Не может повышать до администратора. Не имеет возможности выполнять критичеки и необратимые операции. Имеет доступ до технического мониторинга платформы               |
| Финансовый менеджер    | Имеет доступ ко всей финансовой информации для партнёра. Может формировать отчёты/ выгружа закрывающие документы иницииализировать финансовые транзакции. Не имеет доступа до системы управления пользователями                                                                 |
| Операционный менеджер  | Имеет доступ к финансовой информации конкретных водителей. Может формировать отчёты. Не может инициировать финансовые транзакции. Может добавлять новых пользователей с ролью Водитель. Не может удалять водителей, но может приостанавливать действие учётных записей водителей |
| Водитель               | Имеет доступ только к своему аккаунту и не имеет доступ к общей информации партнёра.                                                                                                                                                                                            |